<div class="admin-dashboard">
  <div class="dashboard-header">
    <h1><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>
    <p>Welcome back, {{ currentUser()?.name }}</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card blue">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3>{{ analyticsSummary?.todayActiveUsers || 0 }}</h3>
        <p>Today's Active Users</p>
        <span class="stat-detail">{{ analyticsSummary?.last7DaysUsers || 0 }} in last 7 days</span>
      </div>
    </div>

    <div class="stat-card green">
      <div class="stat-icon">
        <i class="fas fa-shopping-cart"></i>
      </div>
      <div class="stat-content">
        <h3>{{ analyticsSummary?.todayTransactions || 0 }}</h3>
        <p>Today's Transactions</p>
        <span class="stat-detail">{{ analyticsSummary?.totalTransactions || 0 }} total</span>
      </div>
    </div>

    <div class="stat-card orange">
      <div class="stat-icon">
        <i class="fas fa-box"></i>
      </div>
      <div class="stat-content">
        <h3>{{ totalProducts }}</h3>
        <p>Total Products</p>
        <span class="stat-detail">Across all categories</span>
      </div>
    </div>

    <div class="stat-card purple">
      <div class="stat-icon">
        <i class="fas fa-user-friends"></i>
      </div>
      <div class="stat-content">
        <h3>{{ totalUsers }}</h3>
        <p>Registered Users</p>
        <span class="stat-detail">Total members</span>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
    <div class="action-buttons">
      <a routerLink="/admin/products/add" class="action-btn">
        <i class="fas fa-plus-circle"></i>
        <span>Add New Product</span>
      </a>
      <a routerLink="/admin/products" class="action-btn">
        <i class="fas fa-edit"></i>
        <span>Manage Products</span>
      </a>
      <a routerLink="/admin/categories" class="action-btn">
        <i class="fas fa-sitemap"></i>
        <span>Manage Categories</span>
      </a>
      <a routerLink="/admin/subcategories" class="action-btn">
        <i class="fas fa-list"></i>
        <span>Manage Subcategories</span>
      </a>
      <a routerLink="/admin/brands" class="action-btn">
        <i class="fas fa-trademark"></i>
        <span>Manage Brands</span>
      </a>
      <a routerLink="/admin/users" class="action-btn">
        <i class="fas fa-users-cog"></i>
        <span>Manage Users</span>
      </a>
      <button class="action-btn" (click)="loadDashboardData()">
        <i class="fas fa-sync-alt"></i>
        <span>Refresh Data</span>
      </button>
    </div>
  </div>

  <!-- Recent Transactions -->
  <div class="recent-section">
    <h2><i class="fas fa-receipt"></i> Recent Transactions</h2>
    <div class="transactions-table" *ngIf="recentTransactions.length > 0; else noTransactions">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User</th>
            <th>Type</th>
            <th>Items</th>
            <th>Date & Time</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of recentTransactions">
            <td>#{{ transaction.id.slice(-6) }}</td>
            <td>{{ transaction.userName }}</td>
            <td>
              <span class="badge" [class.badge-order]="transaction.type === 'order'"
                                  [class.badge-quote]="transaction.type === 'quote'"
                                  [class.badge-cart]="transaction.type === 'cart'">
                {{ transaction.type | titlecase }}
              </span>
            </td>
            <td>{{ transaction.items }}</td>
            <td>{{ formatDate(transaction.timestamp) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-template #noTransactions>
      <div class="no-data">
        <i class="fas fa-inbox"></i>
        <p>No transactions yet today</p>
      </div>
    </ng-template>
  </div>

  <!-- Analytics Chart Placeholder -->
  <div class="analytics-section">
    <h2><i class="fas fa-chart-line"></i> Weekly Overview</h2>
    <div class="chart-info">
      <div class="chart-stat">
        <h4>{{ analyticsSummary?.last7DaysUsers || 0 }}</h4>
        <p>Active Users (7 days)</p>
      </div>
      <div class="chart-stat">
        <h4>{{ analyticsSummary?.last7DaysTransactions || 0 }}</h4>
        <p>Transactions (7 days)</p>
      </div>
      <div class="chart-stat">
        <h4>{{ analyticsSummary?.totalPageViews || 0 }}</h4>
        <p>Total Page Views</p>
      </div>
    </div>
  </div>
</div>
